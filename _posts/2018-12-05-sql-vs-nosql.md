---
layout: post
title:  "SQL vs NoSQL"
date:   2018-11-28 22:51:05 +0300
---
## Реляционная модель и SQL
> Начинай с малого, не сойдешь за отсталого.  

Поэтому начнем с истории о том, как появились реляционки, что это такое и почему они. Всем просвященным или принципиально не читающим теорию и исторические сводки можно преспокойно скипнуть дальше.  

Было время (около 1955), когда программисты были настолько суровы, что работали напрямую с диском на уровне цилиндров, секторов и головок - люди реально писали самопальные СУБД для конкретных дисков, выполняющие преобразование относительных адресов в абсолютные.  
Но все начало становиться интересней, когда вычислительные мощности стали расти нелинейными темпами и давали возможность развернуть схемы данных покрупнее за теже бабки, но вот мозг у человеков оставался до неприличия постоянен.  
Поэтому растущая сложность такого подхода с одной стороны (попробуйте запомнить детали, какие цилиндры, размеры секторов под какую сущность заточены, когда у вас не 5-7, а хотя бы 15-17 сущностей) и увеличение объема дисков за те же деньги - с другой, привели к тому, что сильнейшие умы нашего вида стали делать именно то, что мы всегда делаем, когда хотим снизить возрастающую сложность - переход на следующий более высокий уровень абстракции. То есть мы стали подумывать над *моделями данных*.  

**Модель данных** - это, грубо говоря, какое-то описание того, по каким правилам данные будут упорядочиваться, добавляться и изменяться на диске.  
Математиками быстро были синтезированы различные, говоря задним числом, немного холливарные, модели данных с такими названиями как: [сетевая](https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85) и [иерархическая](https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%B0%D1%8F_%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85). На подробностях останавливаться не будем, но заметим немаловажный факт: к этим моделям стали разрабатыавть **системы управления базами данных** (СУБД) - программы, реализующие в себе ту или иную модель, берущие на себя все сложные алгоритмические изыски и скрывающие множество низкоуровневых деталей. Так для сетевой модели была популярна Integrated Data Store (IDS), а для иерархической - IBM Information Management System (IMS).  
Эта избавило разработчиков от заботы о низкоуровневых деталей дисков и самое главное - от сложности и многообразия структур данных и алгоритмов манипуляций над ними. То есть теперь любой рядовой разраб при заканчивающимся дисковом пространстве мог относительно спокойно вмонтировать еще один диск, за вести на него еще одну СУБД и, воспользовавшись выигранным временем, пойти вмонитровать пивандрия.  
Вся эта движуха длилась до конца 60-х голов, когда Эдгар Кодд сформулировал и изложил принципы *реляционной модели*. 
  

Итак, реляционная модель - продукт теории построения баз данных на основе таких фундаментальных разделов математики, как теория множеств и логика (исчисление предикатов) первого порядка.
Если опустить слишком умные понятия и перейти к более прикладным, то реляцоинная модель суть есть 3 вещи:
* Данные в базе представляют собой набор отношений (таблиц) - структурный аспект;
* Отношения (таблицы) отвечают определенным условиям целостности - целостный аспект;
* Есть поддержка операторов манипулирования отношениями - манипуляционный аспект;  

Теперь по каждому пункут человеческим языком.  
### Стурктурный аспект.  
Он фиксирует тот факт, что модель описывает любой набор данных, как *нормализованные отношения*. 
Отношение - это формальный термин (из теории множеств) неформального слова "таблица", так что дальше интерпретируйте эти два слова, как синонимы. *Нормализация* - это устранение избыточности и несогласованности данных. Существуют свойства, характеризующие отношение с точки зрения избыточности, они основаны на строгой теории нормализации. Каждое такое свойство называется [нормальная форма](https://ru.wikipedia.org/wiki/%D0%9D%D0%BE%D1%80%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D0%B0).  
Погодите прекращать нервничать, если все еще непонятно, сейчас будет дан (немного грубоватый) пример.  
Итак, у нас есть набор данных о работниках какой-то фирмы, ее проектах и клиентах.
```
Сотрудники:  
- Программист Петя Дедлайнов, 32 года, работает над проектом "Ping";
- Программист Вова Дебагин, 25 лет, работает над проектом "Pong";
- Менеджер Ваня Заебцов, 29 лет, работает над проектоми "Ping" и "Pong";
Проекты:  
- Ping, заканчивающийся 2019-01-01;
- Pong, заканчивающийся 2020-02-02;
Клиенты:  
- Динг, 30 лет, заказал реализацию проекта Ping;
- Донг, 40 лет, заказал реализацию проекта Pong;
```
Наша задача составить схему данных по реляционной моделе. 
Очевидно, выделяющиеся сущность - сотрудники и клиенты, они должны будут выделены в обособленные таблицы (отношения). А вот выделять ли для проектов отдельную таблицу пытливому уму новичка может показаться неясным.  
То есть можно сделать 2 таблицы и запихать в них все:
Сотрудники

|EID   | Имя           | Фамилия       | Возраст  | Должность | Проект |
| ---- |:-------------:|:-------------:| --------:|----------:|-------:|
|...   |...            |...            |...       |...        |...     |

Клиенты

|CID   | Имя           | Возраст  | Проект |
| ---- |:-------------:| --------:|-------:|
|...   |...            |...       |...     |

Или можно создать 2 таблицы:
Сотрудники

|EID   | Имя           | Фамилия       | Возраст  | Должность | Проект ID |
| ---- |:------------- |:-------------:| --------:|----------:|----------:|
|...   |...            |...            |...       |...        |...        |

Клиенты

|CID   | Имя           | Возраст  | Проект ID |
| ---- |:------------- | --------:|----------:|
|...   |...            |...       |...        |

Проекты

|PID   | Название      | Дата окончания  |
| ---- |:------------- | ---------------:|
|...   |...            |...              |


Вот тут-то и нужно вспомнить про нормализацию, ведь если мы проекты сделаем столбцами для каджой из двух первых таблиц


Итак, что такое *реляционная база данных* (РБД) - это БД, основанная на одноименной модели данных (РМД)


Смерть SQL как технологии предрекают долгие годы, но дедушка живее всех живых.

Но в чем же прикол этой вашей реляцоинной модели? И как она мне пригодиться в обычной жизни? - законно поинтересуются многие будущие выпускники средней школы. Но польза реляционной модели не терпит сомнений (спекулянты из Forbes впендюрили ее в список важнейших инноваций последних 85 лет).

Избыточность само по себе не является чем-то плохим (особенно финансовая).  

NoSQL - это не просто какое-то семейство БД, это множество семейств, куда просто не входят РДБ. Ведь некрасный - это не только синий, но еще и зеленый, и желтый и т.д.

Умный подход новой технологии опирается на тесную оценку ваших потребностей, с инструментами, доступными для достижения этих самых потребностей.

Мораль: монга монгой, но если у разраба руки с достаточно маленьким радиусом кривизны, то его реализация задуманного обречена на тотальный рефакторинг безотносительно типа БД, который был выбран.

